
[supervisord]
nodaemon=true
logfile=/dev/stdout
loglevel=info

; Frontend: production server (Next.js)
[program:frontend]
directory=/app/frontend
command=/bin/sh -lc "yarn start"
environment=PORT=3000
autorestart=true
priority=10
stdout_logfile=/dev/stdout
stderr_logfile=/dev/stderr

; Backend API: gebruik yarn start (val terug op yarn dev)
[program:server]
directory=/app/server
command=/bin/sh -lc "yarn start || yarn dev"
environment=PORT=3001
autorestart=true
priority=20
stdout_logfile=/dev/stdout
stderr_logfile=/dev/stderr

; Worker-proces (queue/achtergrond): yarn start:worker (val terug op yarn dev:worker)
[program:worker]
directory=/app/server
command=/bin/sh -lc "yarn start:worker || yarn dev:worker"
autorestart=true
priority=30
stdout_logfile=/dev/stdout
stderr_logfile=/dev/stderr
``
